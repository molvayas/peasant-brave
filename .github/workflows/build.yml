# Stub workflow - calls private build system
# 
# REQUIRED SECRETS:
#   - PRIVATE_REPO_PAT: PAT with access to private repos
#   - BRAVE_ENV_CONFIG: Brave build configuration
#   - ARCHIVE_PASSWORD: (optional) Artifact encryption
#   - GPG_PRIVATE_KEY: (optional) Release signing

name: Build Brave Browser

on:
  workflow_dispatch:
    inputs:
      build_linux_x64:
        description: 'Build Linux x64'
        type: boolean
        default: true
      build_linux_arm64:
        description: 'Build Linux arm64'
        type: boolean
        default: false
      build_macos_x64:
        description: 'Build macOS x64'
        type: boolean
        default: true
      build_macos_arm64:
        description: 'Build macOS arm64'
        type: boolean
        default: false
      build_windows_x64:
        description: 'Build Windows x64'
        type: boolean
        default: true
      build_windows_arm64:
        description: 'Build Windows arm64'
        type: boolean
        default: false
      build_windows_x86:
        description: 'Build Windows x86 (32-bit)'
        type: boolean
        default: false
      build_type:
        description: 'Build type'
        type: choice
        options:
          - Component
          - Release
        default: Component
      publish_release:
        description: 'Publish GitHub release'
        type: boolean
        default: false
      require_approval:
        description: 'Require manual approval'
        type: boolean
        default: true

jobs:
  build:
    uses: molvayas/peasant-build-system/.github/workflows/build-16stage.yml
    with:
      build_linux_x64: ${{ inputs.build_linux_x64 }}
      build_linux_arm64: ${{ inputs.build_linux_arm64 }}
      build_macos_x64: ${{ inputs.build_macos_x64 }}
      build_macos_arm64: ${{ inputs.build_macos_arm64 }}
      build_windows_x64: ${{ inputs.build_windows_x64 }}
      build_windows_arm64: ${{ inputs.build_windows_arm64 }}
      build_windows_x86: ${{ inputs.build_windows_x86 }}
      build_type: ${{ inputs.build_type }}
      publish_release: ${{ inputs.publish_release }}
      require_approval: ${{ inputs.require_approval }}
    secrets:
      PRIVATE_REPO_PAT: ${{ secrets.PRIVATE_REPO_PAT }}
      BRAVE_ENV_CONFIG: ${{ secrets.BRAVE_ENV_CONFIG }}
      ARCHIVE_PASSWORD: ${{ secrets.ARCHIVE_PASSWORD }}
      GPG_PRIVATE_KEY: ${{ secrets.GPG_PRIVATE_KEY }}

